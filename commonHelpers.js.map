{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43258718-b5e692e88f6a0e01a4c3d4849';\nconst BASE_URL = `https://pixabay.com/api/`;\n\nexport async function fetchImages(query, page) {\n  try {\n      const response = await axios.get(`${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`);\n      return response.data;\n  } catch (error) {\n      console.error('Error fetching images:', error.message);\n      return [];\n  }\n};\n// console.log(fetchImages());","const gallery = document.querySelector('.gallery');\n\n  export function createGalleryItem(image) {\n    const galleryItem = document.createElement('li');\n    galleryItem.classList.add('gallery-item');\n\n    const imageLink = document.createElement('a');\n    imageLink.classList.add('gallery-link');\n    imageLink.href = image.largeImageURL;\n\n    const img = document.createElement('img');\n    img.classList.add('gallery-image');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n\n    const likes = createStats('Likes', image.likes);\n    const views = createStats('Views', image.views);\n    const comments = createStats('Comments', image.comments);\n    const downloads = createStats('Downloads', image.downloads);\n\n    const mainListGallery = document.createElement('div');\n    mainListGallery.classList.add('gallery-main');\n    mainListGallery.appendChild(likes);\n    mainListGallery.appendChild(views);\n    mainListGallery.appendChild(comments);\n    mainListGallery.appendChild(downloads);\n    \n\n    imageLink.appendChild(img);\n    galleryItem.appendChild(imageLink);\n    galleryItem.appendChild(mainListGallery);\n    \n\n    return galleryItem;\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nfunction createStats(name, value) {\n    const listGallery = document.createElement('div');\n    listGallery.classList.add('gallery-list');\n\n    const listItem  = document.createElement('h3');\n    listItem.classList.add('gallery-name');\n    listItem.textContent = name;\n\n    const listNumb  = document.createElement('div');\n    listNumb.classList.add('gallery-numb');\n    listNumb.textContent = value;\n\n    listGallery.appendChild(listItem);\n    listGallery.appendChild(listNumb);\n\n    return listGallery;\n}\n\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { createGalleryItem, clearGallery } from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.search');\nconst input = form.querySelector('.inputSearch');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.loadBtn'); \nconst loaderMain = document.querySelector('.loaderMain');\n\nlet query;\nlet page;\nlet maxPage;\n\n\nform.addEventListener('submit', handleFormSubmit);\nloadBtn.addEventListener('click', clickLoadBtn);\n\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt' });\n\nasync function handleFormSubmit(event) {\n    event.preventDefault();\n    hideLoadBtn();\n    loader.style.display = 'block';\n    query = input.value.trim();\n\n    page = 1;\n   \n    if (!query) {\n        displayErrorMessage('Please enter a search query.');\n        return;\n    }\n    showLoaderEl();\n    try {\n        clearGallery();\n        const data = await fetchImages(query, page);\n        maxPage = Math.ceil(data.totalHits / 15);\n        if (data.hits.length === 0) {\n            hideLoaderEl();\n            displayErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n            return;\n        }\n        displayImages(data.hits);\n    } catch (error) {\n        console.error('Error searching images:', error);\n        displayErrorMessage('Failed to fetch images. Please try again later.');\n    }finally {\n        loader.style.display = 'none';\n        input.value ='';\n        lightbox.refresh();\n    }\n    hideLoaderEl();\n  checkBtnVisibleStatus();\n  event.target.reset();\n}\n\nfunction displayImages(images) {\n    const galleryItems = images.map(createGalleryItem);\n    gallery.append(...galleryItems);\n}\n\nfunction displayErrorMessage(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight',\n        timeout: 3000,\n        closeOnClick: true,\n    });\n}\n\nasync function clickLoadBtn() {\n    page += 1;\n    showLoaderEl();\n  \n    try {\n      const data = await fetchImages(query, page);\n      displayImages(data.hits);\n    } catch (err) {\n      showError(err);\n    }\n  \n    hideLoaderEl();\n    checkBtnVisibleStatus();\n\n    const height = gallery.firstElementChild.getBoundingClientRect().height;\n  \n    scrollBy({\n      behavior: 'smooth',\n      top: height * 2,\n    });\n};\n\nfunction showLoadBtn() {\n    loadBtn.classList.remove('hidden');\n  }\n  \n  function hideLoadBtn() {\n    loadBtn.classList.add('hidden');\n  }\n  \n  function showLoaderEl() {\n    loaderMain.classList.remove('hidden');\n  }\n  \n  function hideLoaderEl() {\n    loaderMain.classList.add('hidden');\n  }\n\n  function showError(msg) {\n    iziToast.error({\n        title: 'Error',\n        message: msg,\n        position: 'topRight',\n        timeout: 3000,\n        closeOnClick: true,\n    });\n  }\n\n  function checkBtnVisibleStatus() {\n    debugger;\n    if (page >= maxPage) {\n      hideLoadBtn();\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      showLoadBtn();\n    }\n  }"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","error","gallery","createGalleryItem","image","galleryItem","imageLink","img","likes","createStats","views","comments","downloads","mainListGallery","clearGallery","name","value","listGallery","listItem","listNumb","form","input","loader","loadBtn","loaderMain","maxPage","handleFormSubmit","clickLoadBtn","lightbox","SimpleLightbox","event","hideLoadBtn","displayErrorMessage","showLoaderEl","data","hideLoaderEl","displayImages","checkBtnVisibleStatus","images","galleryItems","message","iziToast","err","showError","height","showLoadBtn","msg"],"mappings":"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"}